\bookmarksetupnext{startatroot,level=0}
\chapter[Appendix]{}
\chaptermark{}
%\addcontentsline{toc}{chapter}{Preliminaries}

\vskip0mm

{\footnotesize

This appendix should be used as a quick reference while reading the rest of the book;
it contains statements of necessary results and references to complete proofs.

\section{Metric spaces}\label{sec:metric-spcaes}

We assume familiarity with the notion of distance in the
Euclidean space.
In this section, we briefly discuss its generalization and fix notations that will be used further.
All these topics are discussed in detail in the introductory part of the book by Dmitri Burago, Yuri Burago, and Sergei Ivanov \cite{burago-burago-ivanov}.

\setlength{\multicolsep}{20pt}
\spell{\begin{multicols}{2}}{}

\subsection*{Definitions}

\emph{Metric} is a function that returns a real value $\Dist(x,y)$ for any pair of elements $x,y$ in a given set $\spc{X}$  and satisfies the following axioms for any triple $x,y,z\in \spc{X}$: \label{page:def:metric}
\begin{enumerate}[(a)]
\item\label{def:metric-space:a} Positiveness: 
$$\Dist(x,y)\ge 0.$$
\item\label{def:metric-space:b} $x=y$ if and only if 
$$\Dist(x,y)=0.$$
\item\label{def:metric-space:c} Symmetry: $$\Dist(x, y) = \Dist(y, x).$$
\item\label{def:metric-space:d} Triangle inequality: 
$$\Dist(x, z) \le \Dist(x, y) + \Dist(y, z).$$
\end{enumerate}

A set with a metric is called a \index{metric space}\emph{metric space}, and the elements of the set are called \index{point}\emph{points}.

\subsection*{Shortcut for distance}
Usually, we consider only one metric on a set, therefore we can denote the metric space and its underlying set by the same letter, say $\spc{X}$.
In this case, we also use the shortcut notations $\dist{x}{y}{}$ or $\dist{x}{y}{\spc{X}}$ for the {}\emph{distance} $\Dist(x,y)$ from $x$ to $y$ in $\spc{X}$.\index{10aaa@$\dist{x}{y}{}$, $\dist{x}{y}{\spc{X}}$ (distance)}
For example, the triangle inequality can be written as 
$$\dist{x}{z}{\spc{X}}\le \dist{x}{y}{\spc{X}}+\dist{y}{z}{\spc{X}}.$$

The Euclidean space and plane, as well as the real line, will be the most important examples of metric spaces.
In these examples, the introduced notation $\dist{x}{y}{}$ for the distance from $x$ to $y$ has perfect sense as the norm of the vector $x-y$.
However, let us emphasise that in a general metric space, the difference of points $x-y$ has no meaning.

\subsection*{More examples}

Usually, if we say {}\emph{plane} or {}\emph{space} we mean the {}\emph{Euclidean} plane or space.
However, the plane (as well as the space) admits many other metrics; for example, the so-called {}\emph{Manhattan metric} from the following exercise.

\begin{thm}{Exercise}\label{ex:ell-infty}
Consider the function
$$\Dist(p,q)=|x_1-x_2|+|y_1-y_2|,$$
where $p=(x_1,y_1)$ and $q=(x_2,y_2)$ are points in the coordinate plane $\mathbb{R}^2$.
Show that $\Dist$ is a metric on $\mathbb{R}^2$.
\end{thm}

Another example: the {}\emph{discrete space} --- an arbitrary nonempty set $\spc{X}$ with the metric defined as $\dist{x}{y}{\spc{X}}=0$ if $x=y$ and $\dist{x}{y}{\spc{X}}=1$ otherwise.

\subsection*{Subspaces}
Any subset of a metric space is also a metric space, by restricting the original metric to the subset;
the obtained metric space is called a {}\emph{subspace}.
In particular, all subsets of the Euclidean space are metric spaces.

\subsection*{Balls}
Given a point $p$ in a metric space $\spc{X}$ and a real number $R\ge 0$, the set of points $x$ at the distance less than $R$ (at most $R$) from $p$ is called the \index{open!ball}\emph{open} (respectively \index{closed!ball}\emph{closed}) {}\emph{ball} of radius $R$ with center~$p$.
The open ball is denoted as $B(p,R)$ or $B(p,R)_{\spc{X}}$;
the second notation is used if we need to emphasize that the ball is from $\spc{X}$.
Formally speaking
\begin{align*}
B(p,R)&=B(p,R)_{\spc{X}}=
\\
&=\set{x\in \spc{X}}{\dist{x}{p}{\spc{X}}< R}.
\end{align*}
\index{10b@$B(p,R)_{\spc{X}}$, $\bar B[p,R]_{\spc{X}}$ (ball)}
Analogously, the closed ball is denoted as $\bar B[p,R]$ or $\bar B[p,R]_{\spc{X}}$ and
\begin{align*}
\bar B[p,R]&=\bar B[p,R]_{\spc{X}}=
\\
&=\set{x\in \spc{X}}{\dist{x}{p}{\spc{X}}\le R}.
\end{align*}

\begin{thm}{Exercise}\label{ex:B2inB1}

\begin{subthm}{ex:B2inB1:a}
Let $p$ and $q$ be points in a metric space $\spc{X}$.
Show that if $\bar B[p,2]\z\subset \bar B[q,1]$, then $\bar B[p,2]\z=\bar B[q,1]$.
\end{subthm}

\begin{subthm}{ex:B2inB1:b}
Construct a metric space $\spc{X}$ with two points $p$ and $q$ such that the strict inclusion
$B(p,\tfrac32)\subsetneq B(q,1)$ holds.
\end{subthm}

\end{thm}

\subsection*{Isometries}

Let $\spc{X}$ and $\spc{Y}$ be two metric spaces. 
A~map $f\:\spc{X} \z\to \spc{Y}$
is
called \index{distance-preserving map}\emph{distance-preserving} if 
$$\dist{f(x)}{f(y)}{\spc{Y}}
 = \dist{x}{y}{\spc{X}}$$
for any $x,y\in {\spc{X}}$.

A bijective distance-preserving map is called an \index{isometry}\emph{isometry}. 
Two metric spaces are called {}\emph{isometric} if there exists an isometry between them.

\begin{thm}{Exercise}\label{ex:dist-preserv=>injective}
Show that any distance-preserving map $f\:\spc{X}\to\spc{Y}$ is \index{injective map}\emph{injective};
that is, $f(x)\ne f(y)$ for any pair of distinct points $x, y\in \spc{X}$.
\end{thm}

\subsection*{Continuity}

\begin{thm}{Definition}
 Let ${\spc{X}}$ be a metric space.
A sequence of points $x_1, x_2, \ldots$ in ${\spc{X}}$ {}\emph{converges}
if there is a point
$x_\infty\in {\spc{X}}$ such that $\dist{x_\infty}{x_n}{}\to 0$ as $n\to\infty$.  
That is, for every $\epsilon > 0$, there is a natural number $N$ such that for all $n \ge N$, we have
\[
\dist{x_\infty}{x_n}{\spc{X}}
<
\epsilon.
\]

In this case, we say that the sequence $x_n$ {}\emph{converges} to $x_\infty$, 
or $x_\infty$ is the {}\emph{limit} of the sequence $x_n$.
Notationally, we write $x_n\to x_\infty$ as $n\to\infty$
or $x_\infty=\lim_{n\to\infty} x_n$.
\end{thm}

\begin{thm}{Definition}\label{def:continuous}
Let $\spc{X}$ and $\spc{Y}$ be metric spaces.
A map $f\:\spc{X}\to \spc{Y}$ is called \index{continuous}\emph{continuous} if, for any convergent sequence $x_n\to x_\infty$ in ${\spc{X}}$,
we have $f(x_n) \to f(x_\infty)$ in $\spc{Y}$.

Equivalently, $f\:\spc{X}\to \spc{Y}$ is continuous if, for any $x\in {\spc{X}}$ and any $\epsilon>0$,
there is $\delta>0$ such that 
$$\dist{x}{y}{\spc{X}}<\delta\quad \Longrightarrow\quad \dist{f(x)}{f(y)}{\spc{Y}}<\epsilon.$$

\end{thm}

\begin{thm}{Exercise}\label{ex:shrt=>continuous}
Let $f\:\spc{X}\to \spc{Y}$ be a {}\emph{distance non-expanding} map between metric spaces; that is, 
\[\dist{f(x)}{f(y)}{\spc{Y}}\le \dist{x}{y}{\spc{X}}\]
for any $x,y\in \spc{X}$.
Show that $f$ is continuous.
\end{thm}
\spell{\end{multicols}}{}

\section{Topology}\label{sec:topology}

The following material is covered in any introductory text to topology; 
one of our favorites is a textbook by Czes Kosniowski \cite{kosniowski}.

\spell{\begin{multicols}{2}}{}

\subsection*{Closed and open sets}

\begin{thm}{Definition}
A subset $C$ of a metric space $\spc{X}$ is called \index{closed!set}\emph{closed} if whenever a sequence $x_n$ of points from $C$ converges in $\spc{X}$, we have that $\lim_{n\to\infty} x_n \in C$.

A set $\Omega \subset \spc{X}$ is called \index{open!set}\emph{open} if, for any $z\in \Omega$, 
there is $\epsilon>0$ such that $B(z,\epsilon)\subset\Omega$.
\end{thm}

\begin{thm}{Exercise}\label{ex:close-open}
Let $Q$ be a subset of a metric space $\spc{X}$.
Show that $Q$ is closed if and only if its complement $\Omega=\spc{X}\setminus Q$ is open.
\end{thm}

An open set $\Omega$ that contains a given point $p$ is called a \index{neighborhood}\emph{neighborhood of~$p$}.
A closed subset $C$ that contains $p$ together with its neighborhood is called a {}\emph{closed neighborhood of~$p$}.

A point $p$ lies on the \index{boundary}\emph{boundary} of a set $Q$ (briefly, $p\in\partial Q$) if any neighborhood of $p$ contains points in $Q$ and in the complement of~$Q$.

\subsection*{Compact sets}

A subset $K$ of a metric space is called \index{compact}\emph{compact} if any sequence of points in $K$ has a subsequence that converges to a point in~$K$.

The following properties follow directly from the definition:

\begin{itemize}
\item A closed subset of a compact set is compact.
\item An image of a compact set under a continuous map is compact.
\end{itemize}

\begin{thm}{Heine--Borel lemma}\label{thm:Heine--Borel}
A subset of Euclidean space is compact if and only if it is closed and bounded.
\end{thm}


\subsection*{Homeomorphisms\\ and embeddings}

A bijection $f\:\spc{X}\to\spc{Y}$ between metric spaces is called a \index{homeomorphism}\emph{homeomorphism} if $f$ and its inverse $f^{-1}$ are continuous.
A homeomorphism to its image is called an \index{embedding}\emph{embedding}.

If there exists a homeomorphism $f\:\spc{X}\z\to \spc{Y}$,
we say that ${\spc{X}}$ is {}\emph{homeomorphic} to $\spc{Y}$,
or $\spc{X}$ and $\spc{Y}$ are {}\emph{homeomorphic}.

If a metric space $\spc{X}$ is homeomorphic to a known space, for example, plane, sphere, disc, circle, and so on,
then we may also say that $\spc{X}$ is a \index{topological surface}\emph{topological} plane, sphere, disc, circle, and so on.

The following theorem characterizes homeomorphisms between compact spaces:

\begin{thm}{Theorem}\label{thm:Hausdorff-compact}
A continuous bijection $f$ between compact metric spaces has a continuous inverse.
In particular, we have the following.

\begin{subthm}{}
Any continuous bijection between compact metric spaces
is a homeomorphism.
\end{subthm}

\begin{subthm}{}
Any continuous injection from a compact metric spaces to another metric space
is an embedding.
\end{subthm}


\end{thm}

\subsection*{Connected sets}

Recall that a continuous map $\alpha$ from the unit interval $[0,1]$ to a Euclidean space is called a \index{path}\emph{path}.
If $p=\alpha (0)$ and $q = \alpha (1)$, then we say that $\alpha$ connects $p$ to~$q$.

A nonempty set $X$ in the Euclidean space is called \index{path-connected set}\emph{path-connected} if any two points $x,y\in X$ can be connected by a path lying in~$X$.

A nonempty set $X$ in the Euclidean space is called \index{connected}\emph{connected} if one cannot cover $X$ with two disjoint open sets $V$ and $W$ such that both intersections $X\cap V$ and $X\cap W$ are nonempty.

Notice that path-connected and connected sets are nonempty by the definition.

\begin{thm}{Proposition}
Any path-connected set is connected.

Moreover, any open connected set in the Euclidean space or plane is path-connected.
\end{thm}

Given a point $x\in X$, the maximal connected subset of $X$ containing $x$ is called the {}\emph{connected component} of $x$ in~$X$.

\subsection*{Jordan's theorem}
\index{Jordan's theorem}

The first part of the following theorem was proved by Camille Jordan, the second part is due to Arthur Schoenflies:

\begin{thm}{Theorem}\label{thm:jordan}
The complement of any simple closed curve $\gamma$ in $\mathbb{R}^2$ has exactly two connected components. 

Moreover, there is a homeomorphism $h\:\mathbb{R}^2\to \mathbb{R}^2$ that maps the unit circle to~$\gamma$.
In particular, $\gamma$ bounds a topological disc.
\end{thm}

This theorem is known for its simple formulation and quite hard proof.
For the first statement, a very short proof based on a somewhat developed technique is given by Patrick Doyle \cite{doyle},
among elementary proofs, one of our favorites is the proof given by Aleksei Filippov \cite{filippov}.

We use mostly the smooth case of this theorem which is simpler.
An amusing proof of this case was given by Gregory Chambers and Yevgeny Liokumovich \cite{chambers-liokumovich}.

\spell{\end{multicols}}{}

\section{Elementary geometry}

%%%???orientation is not defined???
\spell{\begin{multicols}{2}}{}
\subsection*{Internal angles}

Polygon is defined as a compact set bounded by a closed polygonal line. 
Recall that the internal angle of a polygon $P$ at a vertex $v$
is defined as the angular measure of the intersection of $P$ with a small circle centered at~$v$.

\begin{thm}{Theorem}\label{thm:sum=(n-2)pi}
The sum of all the internal angles of an $n$-gon is $(n\z-2)\cdot\pi$. 
\end{thm}

A clean proof of this theorem can be found, for example, in \cite{meisters}.
It uses induction on $n$ and is based on the following nontrivial statement:

\begin{thm}{Claim}
Suppose $P$ is an $n$-gon with $n\ge 4$.
Then a diagonal of $P$ lies completely in~$P$.
\end{thm}



\subsection*{Angle monotonicity}

The {}\emph{measure} of angle with sides $[p,x]$ and $[p,y]$ will be denoted by $\measuredangle\hinge pxy$\index{10aab@$\measuredangle\hinge yxz$ (angle measure)};
it takes a value in the interval $[0,\pi]$.

The following corollary of the cosine rule is simple and useful.
It says that the angle of a triangle monotonically depends on the opposite side, assuming we keep the other two sides fixed.


\begin{thm}{Monotonicity lemma}\label{lem:angle-monotonicity}
Let $x$, $y$, $z$, $x^{*}$, $y^{*}$, and $z^{*}$ be 6 points such that $\dist{x}{y}{}\z=|x^{*}-y^{*}|>0$ and $|y-z|=|y^{*}-z^{*}|>0$.
Then 
\[\measuredangle\hinge yxz
\ge
\measuredangle\hinge {y^{*}}{x^{*}}{z^{*}}
\ \Longleftrightarrow\
|x-z|\ge |x^{*}-z^{*}|.\]
\end{thm}

\subsection*{Spherical triangle inequality}

The following theorem says that the triangle inequality holds for angles between half-lines from a fixed point.
In particular, it implies that a sphere with the angle metric is a metric space.

\begin{thm}{Theorem}\label{thm:spherical-triangle-inq}
The following inequality holds for any three line segments $[o,a]$, $[o,b]$, and $[o,c]$ in the Euclidean space:
\[\measuredangle\hinge oab
+
\measuredangle\hinge obc
\ge
\measuredangle\hinge oac\]

\end{thm}

Most of the authors use this theorem without mentioning, but the proof is not that simple.
A short elementary proof can be found in the classical textbook in Euclidean geometry by Andrey Kiselyov \cite[ยง 47]{kiselyov}.


\subsection*{Area of spherical triangle}

\begin{thm}{Lemma}\label{lem:area-spher-triangle}
Let $\Delta$ be a spherical triangle;
that is, an intersection of three closed half-spheres in the unit sphere $\mathbb{S}^2$.
Then 
\[\area\Delta=\alpha+\beta+\gamma-\pi,\eqlbl{eq:area(Delta)}\]
where $\alpha$, $\beta$, and $\gamma$ are the angles of $\Delta$.
\end{thm}

The value $\alpha+\beta+\gamma-\pi$ is called the \index{excess of triangle}\emph{excess} of the triangle $\Delta$,
so the lemma says that the area of a spherical triangle equals its excess.

This lemma will be important for the intuitive understanding of the Gauss--Bonnet formula.
By that reason, we present its proof.

\begin{wrapfigure}{r}{17 mm}
\vskip-0mm
\centering
\includegraphics{mppics/pic-43}
\vskip2mm
\end{wrapfigure}

\parbf{Proof.}
Recall that 
\[\area\mathbb{S}^2=4\cdot\pi.\eqlbl{eq:area(S2)}\]

Note that the area of a spherical slice $S_\alpha$ between two meridians meeting at angle $\alpha$ is proportional to $\alpha$.
Since $S_\pi$ is a half-sphere, from \ref{eq:area(S2)}, we get $\area S_\pi\z=2\cdot\pi$.
Therefore, the coefficient is $2$; that is,
\[\area S_\alpha=2\cdot \alpha
\eqlbl{eq:area(Sa)}\]
for any $\alpha$.

Extending the sides of $\Delta$ we get 6 slices: two $S_\alpha$, two $S_\beta$, and two $S_\gamma$.
They cover most of the sphere once,
but the triangle $\Delta$ and its centrally symmetric copy $\Delta^{*}$ are covered 3 times.
It follows that
\begin{align*}
2\cdot \area S_\alpha &+2\cdot \area S_\beta+2\cdot \area S_\gamma=
\\
&=\area\mathbb{S}^2+4\cdot\area\Delta.
\end{align*}
It remains to apply \ref{eq:area(S2)} and \ref{eq:area(Sa)}.
\qeds

\spell{\end{multicols}}{}

\section{Convex geometry}

\spell{\begin{multicols}{2}}{}
A set $X$ in the Euclidean space is called \index{convex!set}\emph{convex} if, for any two points $x,y\in X$, any point $z$ between $x$ and $y$ lies in~$X$.
It is called  {}\emph{strictly convex} if, for any two points $x,y\in X$, any point $z$ between $x$ and $y$ lies in the interior of~$X$.

From the definition, it is easy to see that the intersection of an arbitrary family of convex sets is convex. 
The intersection of all convex sets containing $X$ is called the \index{convex!hull}\emph{convex hull} of $X$;
it is the minimal convex set containing the set~$X$.

These definitions and the following statements should appear on the first pages of any introductory text in convex geometry;
see for example the book by Roger Webster \cite{webster}.


\subsection*{Separating and supporting planes}

We will use the following corollary of the so-called \index{hyperplane separation theorem}\emph{hyperplane separation theorem}.

\begin{thm}{Lemma}\label{lem:separation}
Let $K\subset \mathbb{R}^3$ be a closed convex set.
Then for any point $p\notin K$ there is a plane $\Pi$ that separates $K$ from $p$;
that is, $K$ and $p$ lie on opposite open half-spaces separated by $\Pi$.

Moreover, for any boundary point $p\in\partial K$, there is a plane $\Pi$ \index{supporting!plane}\emph{supporting} $K$ at $p$;
that is, $\Pi\ni p$ and $K$ lies in a closed half-space bounded by $\Pi$
\end{thm}

\spell{\end{multicols}}{}

\begin{figure*}[h!]
\begin{minipage}{.48\textwidth}
\centering
\includegraphics{mppics/pic-3540}
\end{minipage}\hfill
\begin{minipage}{.48\textwidth}
\centering
\includegraphics{mppics/pic-3542}
\end{minipage}
\end{figure*}

\section{Linear algebra}

\spell{\begin{multicols}{2}}{}

The following theorem can be found in any textbook in linear algebra;
the book by Sergei Treil \cite{treil} will do.

\begin{thm}{Spectral theorem}\label{thm:spectral}
Any symmetric matrix is diagonalizable  by an orthogonal matrix.
\end{thm}

We will use this theorem only for $2{\times}2$ matrices.
In this case, it can be restated as follows:
Consider a function 
\begin{align*}
f(x,y)&=
\begin{pmatrix}
x&y
\end{pmatrix}
\cdot
\begin{pmatrix}
\ell&m
\\
m&n
\end{pmatrix}
\cdot
\begin{pmatrix}
x\\y
\end{pmatrix}=
\\
&=\ell\cdot x^2+2\cdot m\cdot x\cdot y+n\cdot y^2,
\end{align*}
that is defined on a $(x,y)$-coordinate plane.
Then after proper rotation of the coordinates, 
the expression for $f$ in the new $(x,y)$-coordinates will be
\begin{align*}
\bar f(x,y)&=
\begin{pmatrix}
x&y
\end{pmatrix}
\cdot
\begin{pmatrix}
k_1&0
\\
0&k_2
\end{pmatrix}
\cdot
\begin{pmatrix}
x\\y
\end{pmatrix}=
\\
&=k_1\cdot x^2+k_2\cdot y^2.
\end{align*}

\spell{\end{multicols}}{}

\section{Analysis}\label{sec:analysis}

The following material is discussed in any course of real analysis, the classical book by Walter Rudin \cite{rudin} is one of our favorites.

\spell{\begin{multicols}{2}}{}

\subsection*{Measurable functions}

A function is called \index{measurable function}\emph{measurable} if the inverse image of any Borel set is a Borel set.
Virtually all functions that naturally appear in geometry are measurable.

The following theorem makes it possible to extend many statements about continuous functions to measurable functions.

\begin{thm}{Lusin's theorem}\label{thm:lusin}
Let $\phi\:[a,b]\to \mathbb{R}$ be a measurable function.
Then for any $\epsilon>0$, there is a continuous function $\psi_\epsilon\:[a,b]\to \mathbb{R}$ that coincides with $\phi$ outside a set of measure at most $\epsilon$.
Moreover, if $\phi$ is bounded above and/or below, then we may assume that so is~$\psi_\epsilon$.  
\end{thm}

\subsection*{Lipschitz condition}

Recall that a function $f$ between metric spaces is called \index{Lipschitz function}\emph{Lipschitz} if there is a constant $L$ such that 
\[\dist{f(x)}{f(y)}{}\le L\cdot\dist{x}{y}{}\]
for all values $x$ and $y$ in the domain of definition of~$f$.

The following theorem makes it possible to extend many results about smooth functions to Lipschitz functions.
Recall that {}\emph{almost all} means all values, with exceptions in a set of zero Lebesgue measure.

\begin{thm}{Rademacher's theorem}\label{thm:rademacher}
Let $f\:[a,b]\to\mathbb{R}$ be a Lipschitz function.
Then its derivative $f'$ is a bounded measurable function defined almost everywhere in $[a,b]$.
Moreover, it satisfies the fundamental theorem of calculus; that is, the following identity 
\[f(b)-f(a)=\int_a^b f'(x)\cdot dx,\]
holds if the integral is understood in the sense of Lebesgue.
\end{thm}

\begin{figure*}[t!]
\begin{minipage}{.48\textwidth}
\centering
\includegraphics{mppics/pic-320}
\end{minipage}\hfill
\begin{minipage}{.48\textwidth}
\centering
\includegraphics{mppics/pic-321}
\end{minipage}
\end{figure*}

\begin{figure*}[t!]
\begin{minipage}{.48\textwidth}
\centering
\includegraphics{mppics/pic-325}
\end{minipage}\hfill
\begin{minipage}{.48\textwidth}
\centering
\includegraphics{mppics/pic-326}
\end{minipage}
\end{figure*}

\subsection*{Uniform continuity and convergence}

Let $f\:{\spc{X}}\to \spc{Y}$ be a map between metric spaces.
If  for any $\epsilon>0$ there is $\delta>0$ such that 
\[\dist{x_1}{x_2}{\spc{X}}<\delta\ \Longrightarrow\ \dist{f(x_1)}{f(x_2)}{\spc{Y}}<\epsilon,\]
then $f$ is called \index{uniformly continuous}\emph{uniformly continuous}.

Evidently, every uniformly continuous function is continuous;
the converse does not hold.
For example, the function $f(x)=x^2$ is continuous, but not uniformly continuous.

\begin{thm}{Heine--Cantor theorem}
Any continuous function defined on a compact metric space is uniformly continuous.
\end{thm}

If the condition above holds for any function $f_n$ in a sequence, and $\delta$ depends solely on $\epsilon$,
then the sequence $f_n$ is called \index{uniformly continuous}\emph{uniformly equicontinuous}.
More precisely, 
a sequence of functions $f_n:{\spc{X}}\to \spc{Y}$ is called {}\emph{uniformly equicontinuous} if 
for any $\epsilon>0$ there is $\delta>0$ such that 
\[\dist{x_1}{x_2}{\spc{X}}<\delta\ \Longrightarrow\ \dist{f_n(x_1)}{f_n(x_2)}{\spc{Y}}<\epsilon\]
for any~$n$.


We say that a sequence of functions $f_i\: {\spc{X}} \to \spc{Y}$ \index{uniform convergence}\emph{converges uniformly} to a function $f_{\infty}\: {\spc{X}} \to \spc{Y}$ if, for any 
$\epsilon>0$, there is a natural number $N$ such that for all $n \ge N$, we have $\dist{f_{\infty}(x)}{f_n (x)}{}<\epsilon$
for all $x  \in {\spc{X}}$.

\begin{thm}{Arzel\'{a}--Ascoli theorem}\label{lem:equicontinuous}
Suppose $\spc{X}$ and $\spc{Y}$ are compact metric spaces. 
Then any uniformly equicontinuous sequence of functions $f_n\:\spc{X}\z\to \spc{Y}$ has a subsequence that converges uniformly to a continuous function $f_\infty\:\spc{X}\z\to \spc{Y}$.
\end{thm}


\subsection*{Cutoffs and mollifiers}


Here we explain how to construct smooth functions that mimic the behavior of certain model functions.
These functions are used to smooth model geometric objects keeping their shape nearly unchanged.

As an example, consider the following functions
\begin{align*}
h(t)&\df
\begin{cases}
0&\text{if}\ t\le 0,
\\
t&\text{if}\ t> 0;
\end{cases}
\\
f(t)&\df
\begin{cases}
0&\text{if}\ t\le 0,
\\
\frac{t}{e^{1\!/\!t}}&\text{if}\ t> 0.
\end{cases}
\end{align*}
The functions $h$ and $f$ behave alike ---
both vanish at $t\le 0$ and grow to infinity for positive~$t$.
The function $h$ is not smooth --- its derivative at $0$ is undefined.
Unlike $h$, the function $f$ is smooth.
Indeed, the existence of all derivatives $f^{(n)}(x)$ at $x\ne 0$ is evident, and direct calculations show that $f^{(n)}(0)=0$ for all~$n$.

Other useful examples of that type are the so-called \index{bell function}\emph{bell function} --- a smooth function that is positive in an $\epsilon$-neighborhood of zero and vanishing outside this neighborhood.
Such functions can be obtained from the function $f$ constructed above, say 
\[b_\epsilon(t)\df c\cdot f(\epsilon^2-t^2);\]
typically one chooses the constant $c$ so that $\int b_\epsilon=1$.


Another useful example is a \index{sigmoid}\emph{sigmoid} --- nondecreasing function that vanishes for $t\le -\epsilon$ and takes value $1$ for any $t\ge \epsilon$.
It mimics the step function and can be defined the following way: \label{page:sigma-function}
\[\sigma_\epsilon(t)
\df 
\int_{-\infty}^t b_\epsilon(x)\cdot dx.\]

\spell{\end{multicols}}{}

\section{Multivariable  calculus}\label{sec:Multivariable calculus}

The following material is discussed in any course of multivariable calculus;
for example, in the already mentioned book by Walter Rudin \cite{rudin}.

\spell{\begin{multicols}{2}}{}

\subsection*{Regular values}

Let $\Omega\subset \mathbb{R}^m$ be an open subset.
Any map $\bm{f}\:\Omega\to\mathbb{R}^n$ can be thaut of as an array of its coordinate functions
\[f_1,\dots,f_n\:\Omega\to \mathbb{R}.\]
The map $\bm{f}$ is called \index{smooth!map}\emph{smooth} if each function $f_i$ is smooth;
that is, all partial derivatives of $f_i$ are defined in $\Omega$.

The \emph{Jacobian matrix} of $\bm{f}$ at $\bm{x}\in\mathbb{R}^m$ is defined as \index{10j@$\Jac$ (Jacobian matrix)}
\[\Jac_{\bm{x}}\bm{f}=
\begin{pmatrix}
\dfrac{\partial f_1}{\partial x_1} & \cdots & \dfrac{\partial f_1}{\partial x_m}\\
\vdots & \ddots & \vdots\\
\dfrac{\partial f_n}{\partial x_1} & \cdots & \dfrac{\partial f_n}{\partial x_m} \end{pmatrix};\]
we assume the right-hand side is evaluated at $\bm{x}=(x_1,\dots,x_m)$.

If the Jacobian matrix defines a surjective linear map $\mathbb{R}^m\to\mathbb{R}^n$ (that is, if $\rank(\Jac_{\bm{x}}\bm{f})=n$), then we say that 
$\bm{x}$ is a \index{regular!point}\emph{regular point} of~$\bm{f}$.

If $\bm{x}$ is regular anytime $\bm{f}(\bm{x})=\bm{y}$,
then we say that $\bm{y}$ is a \index{regular!value}\emph{regular value} of $\bm{f}$.
The following lemma states that \textit{most} values of a smooth map are regular.

\begin{thm}{Sard's lemma}\label{lem:sard}
Given a smooth map $\bm{f}\colon \Omega \z\to \mathbb{R}^n$ defined on an open set $\Omega\subset \mathbb{R}^m$, almost all values in $\mathbb{R}^n$ are regular.
\end{thm}

The words \index{almost all}\emph{almost all} mean all values, with the possible exceptions belonging to a set with vanishing Lebesgue measure.
In particular, if one chooses a random value equidistributed in an arbitrarily small ball $B\z\subset \mathbb{R}^n$, then it is a regular value of $\bm{f}$ with probability~$1$.

Note that if $m<n$, then any point $\bm{y}=\bm{f}(\bm{x})$ is \emph{not} a regular value of $\bm{f}$.
Therefore, the only regular values of $\bm{f}$ are the points in the complement of the image $\Im \bm{f}$.
In this case, the theorem states that almost all points in $\mathbb{R}^n$ do \textit{not} belong to $\Im \bm{f}$.


\subsection*{Inverse function theorem}

The \index{inverse function theorem}\emph{inverse function theorem} gives an if condition for a map $\bm{f}$ to be invertible in a neighborhood of a given point $\bm{x}$.
The condition is formulated in terms of $\Jac_{\bm{x}}\bm{f}$ --- the Jacobian matrix of $\bm{f}$ at $\bm{x}$.

The \index{implicit function theorem}\emph{implicit function theorem} is its close relative and a corollary.
It is used when we need to pass from parametric to implicit descriptions of curves and surfaces.

Both theorems reduce the existence of a map satisfying a certain equation to a question in linear algebra.
We use these two theorems only for $n\le 3$.

\begin{thm}{Inverse function theorem}\label{thm:inverse}
Let $\bm{f}\z=(f_1,\dots,f_n)\:\Omega\to\mathbb{R}^n$ be a smooth map
defined on an open set $\Omega\subset \mathbb{R}^n$.
Assume that $\Jac_{\bm{x}}\bm{f}$
is invertible at $\bm{x}\in \Omega$.
Then there is a smooth map $\bm{h}\:\Phi\to\mathbb{R}^n$ defined in an open neighborhood $\Phi$ of ${\bm{y}}\z=\bm{f}(\bm{x})$ that is a {}\emph{local inverse of $\bm{f}$ at $\bm{x}$};
that is, there is a neighborhood $\Psi\ni \bm{x}$ such that
$\bm{f}$ defines a homeomorphism $\Psi\leftrightarrow \Phi$, and
$\bm{h} \circ \bm{f}$ is an identity map on $\Psi$.

Moreover, if $|\det[\Jac_{\bm{x}}\bm{f}]|>\epsilon>0$, the domain $\Omega$ contains an $\epsilon$-neighborhood of $\bm{x}$, 
and the first and second partial derivatives $\tfrac{\partial f_i}{\partial x_j}$, $\tfrac{\partial^2 f_i}{\partial x_j\partial x_k}$ are bounded by a constant $C$ for all $i$, $j$, and $k$, then we can assume that $\Phi$ is a $\delta$-neighborhood of $\bm{y}$, for some $\delta>0$ that depends only on $\epsilon$ and~$C$. 
\end{thm}

\begin{thm}{Implicit function theorem}\label{thm:imlicit}
Let $\bm{f}\z=(f_1,\dots,f_n)\:\Omega\to\mathbb{R}^n$ be a smooth map defined on an open subset $\Omega\subset\mathbb{R}^{n+m}$, where
$m,n\z\ge 1$.
Regard $\mathbb{R}^{n+m}$ as a product space $\mathbb{R}^n\times \mathbb{R}^m$ with coordinates
$(\bm{x},\bm{y})\z=(x_1,\dots,x_n,y_1,\dots,y_m)$.
Consider the following matrix 
\[
M=\begin{pmatrix}
\dfrac{\partial f_1}{\partial x_1} & \cdots & \dfrac{\partial f_1}{\partial x_n}\\
\vdots & \ddots & \vdots\\
\dfrac{\partial f_n}{\partial x_1} & \cdots & \dfrac{\partial f_n}{\partial x_n} \end{pmatrix}\]
formed by the first $n$ columns of $\Jac_{(\bm{x},\bm{y})}\bm{f}$.
Assume $M$ is invertible at $(\bm{x},\bm{y})\z\in \Omega$ and $\bm{f}(\bm{x},\bm{y})\z=0$.
Then there is a smooth function $\bm{h}\:\Phi\z\to\mathbb{R}^n$ defined on a neighborhood $\Phi\ni \bm{y}$ in $\mathbb{R}^{m}$
and a neighborhood $\Psi\ni (\bm{x},\bm{y})$ in $\mathbb{R}^n\times \mathbb{R}^m$
such that
for any $(x_1,\dots,x_n,y_1,\dots, y_m)\z\in \Psi$, the equality
\[\bm{f}(x_1,\dots,x_n,y_1,\dots, y_m)=\bm{0}\]
holds if and only if 
\[(x_1,\dots,x_n)=\bm{h}(y_1,\dots, y_m).\]

\end{thm}

\subsection*{Multiple integral}

Let $\bm{f}\:\mathbb{R}^n\to\mathbb{R}^n$ be a smooth map (maybe partially defined).
Set
\[\jac_{\bm{x}}\bm{f}\df|\det[\Jac_{\bm{x}}\bm{f}]|;
\index{10j@$\jac$ (Jacobian determinant)}\]
that is, $\jac_{\bm{x}}\bm{f}$ is the absolute value of the determinant of the Jacobian matrix of $\bm{f}$ at $\bm{x}$.

The following theorem plays the role of a substitution rule for multiple variables.

\index{Borel subsets}\emph{Borel subsets} are defined as the class of subsets that are generated from open sets by applying the following operations recursively: countable union, countable intersection, and complement.
Since the complement of a closed set is open and the other way around, these sets can be also generated from all closed sets.
This class of sets includes virtually all sets that naturally appear in geometry but does not include pathological examples that create problems with integration.

\begin{thm}{Theorem}\label{thm:mult-substitution} 
Let $h\:K\to\mathbb{R}$ be a continuous function on a Borel subset $K\subset \mathbb{R}^n$.
Assume $\bm{f}\:\Omega\to \mathbb{R}^n$ is an injective smooth map that is defined on an open set $\Omega\supset K$.
Then 
\[\idotsint_{\bm{x}\in K} h(\bm{x})\cdot \jac_{\bm{x}}\bm{f}
=
\idotsint_{\bm{y}\in \bm{f}(K)} h\circ \bm{f}^{-1}(\bm{y}).\]

\end{thm}

\subsection*{Convex functions}

The following statements will be used only in dimensions $\le 3$.

A function $f\:\mathbb{R}^n\to \mathbb{R}$ is called \index{convex!function}\emph{(strictly) convex} (respectively, \emph{concave}) if
its epigraph $z\ge f(\bm{x})$ (respectively, its subgraph $z\le f(\bm{x})$) is a (strictly) convex set in $\mathbb{R}^n\times \mathbb{R}$.

Let $f\:\mathbb{R}^n\to \mathbb{R}$ be a smooth function (maybe partially defined).
Choose a vector $\vec w\in \mathbb{R}^n$.
Given a point $p\in\mathbb{R}^n$ consider the function $\phi(t)=f(p+t\cdot \vec w)$.
Then the \index{directional derivative}\emph{directional derivative} $(D_{\vec w}f)(p)$ of $f$ at $p$ with respect to vector $\vec w$ is defined by
\[(D_{\vec w}f)(p)=\phi'(0).\]

\begin{thm}{Theorem}\label{thm:Jensen}
A smooth function $f\:K\z\to \mathbb{R}$ defined on a convex subset $K\subset\mathbb{R}^n$ is convex if and only if one of the following equivalent conditions holds:

\begin{subthm}{}
The second directional derivative of $f$ at any point in the direction of any vector is nonnegative; that is,
\[(D_{\vec w}^2f)(p)\ge 0\]
for any $p\in K$ and $\vec w\in\mathbb{R}^n$.
\end{subthm}

\begin{subthm}{}
The so-called \index{Jensen's inequality}\emph{Jensen's inequality}
\begin{align*}
f ((1-t)\cdot x_0 &+ t\cdot x_1 ) \le
\\
&\le (1-t)\cdot f(x_0)+ t\cdot f(x_1)
\end{align*}
holds for any $x_0,x_1\in K$ and $t\in[0,1]$.

\end{subthm}

\begin{subthm}{}
For any $x_0,x_1\in K$, we have 
\[f \left (\frac{x_0 + x_1}2 \right ) \le \frac{f(x_0) + f(x_1)}2.\]
\end{subthm}

\end{thm}


\spell{\end{multicols}}{}

\section{Ordinary differential equations}

The following material is discussed at the beginning of any course of ordinary differential equations; the classical book by Vladimir Arnold \cite{arnold} is one of our favorites.

\spell{\begin{multicols}{2}}{}

\subsection*{First-order equations}

The following theorem guarantees existence and uniqueness of solutions of an initial value problem
for a system of ordinary first-order differential equations
\[
\begin{cases}
x_1'&=f_1(x_1,\dots,x_n,t),
\\
&\,\,\vdots
\\
x_n'&=f_n(x_1,\dots,x_n,t),
\end{cases}
\]
where each $t\mapsto x_i=x_i(t)$ is a real-valued function defined on a real interval $\mathbb{J}$
and each $f_i$ is a smooth function defined on an open subset $\Omega\subset \mathbb{R}^n\times \mathbb{R}$.

The array of functions $(f_1,\dots,f_n)$ can be packed into one vector-valued function 
$\bm{f}\:\Omega\to \mathbb{R}^n$;
the same way the function array $(x_1,\dots,x_n)$ can be packed into a vector-valued function  $\bm{x}\:\mathbb{J}\to\mathbb{R}^n$.
Therefore, the system can be rewritten as one vector equation 
\[\bm{x}'=\bm{f}(\bm{x}, t).\] 

\begin{thm}{Theorem}\label{thm:ODE}
Suppose $\bm{f}\:\Omega\to \mathbb{R}^n$ is a smooth function defined on an open subset $\Omega\z\subset \mathbb{R}^n\times \mathbb{R}$.
Then for any initial data $\bm{x}(t_0)=\bm{u}$ such that $(\bm{u},t_0)\in\Omega$ the differential equation
\[\bm{x}'=\bm{f}(\bm{x},t)\]
has a unique solution $t\mapsto \bm{x}(t)$ defined at a maximal interval $\mathbb{J}$ that contains $t_0$.
Moreover,
\begin{enumerate}[(a)]
\item  if $\mathbb{J}\ne \mathbb{R}$ (that is, if an end $b$ of $\mathbb{J}$ is finite), then $\bm{x}(t)$ does not have a limit point in $\Omega$ as $t\to b$;%
\footnote{In other words, if $\bm{x}(t_n)$ converges for a sequence $t_n\to b$, then its limit does not lie in $\Omega$.}
\item  the function $w\:(\bm{u},t_0,t)\mapsto \bm{x}(t)$ has an open domain of definition in $\Omega\times \mathbb{R}$ that contains all points $(\bm{u},t_0,t_0)$ for $(\bm{u},t_0)\z\in \Omega$, and $w$ is smooth in this domain.
\end{enumerate}

\end{thm}

\subsection*{Higher order}

Consider an ordinary differential equation of order $k$
\[\bm{x}^{(k)}=\bm{f}(\bm{x},\bm{x}',\dots,\bm{x}^{(k-1)},t),\eqlbl{eq:nth-order}\]
where $t\mapsto\bm{x}=\bm{x}(t)$ is a function from a real interval to $\mathbb{R}^n$.

This equation can be rewritten as $k$ first-order equations  with $k-1$ new vector variables 
$\bm{y}_1=\bm{x}'$,
$\bm{y}_2=\bm{x}'',\dots,\bm{y}_{k-1}=\bm{x}^{(k-1)}$:
\[
\begin{cases}
\bm{x}'(t)&=\bm{y}_1(t),
\\
\bm{y}_1'(t)&=\bm{y}_2(t),
\\
&\,\,\vdots
\\
\bm{y}_{k-2}'(t)&=\bm{y}_{k-1}(t),
\\
\bm{y}_{k-1}'(t)&=\bm{f}(\bm{x},\bm{y}_{1},\dots,\bm{y}_{k-1},t).
\end{cases}
\eqlbl{eq:nth-order-new}
\]

Thus, we have derived the following.

\begin{thm}{Theorem}\label{thm:ODE-nth-order}
The $k$-th order equation \ref{eq:nth-order} is equivalent to the system \ref{eq:nth-order-new} consisting of $k$ first-order equations.
\end{thm}


This trick reduces a higher-order ordinary differential equation to a first-order equation. 
In particular, we get local existence and uniqueness for solutions of higher-order equations as in Theorem \ref{thm:ODE};
one only has to assume that
$\Omega\z\subset \mathbb{R}^{n\cdot k}\times \mathbb{R}$, and the initial data consists of $\bm{x}(t_0)$, $\bm{x}'(t_0),\dots,\bm{x}^{(k-1)}(t_0)$.

\spell{\end{multicols}}{}
}
